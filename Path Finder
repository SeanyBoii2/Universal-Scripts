-- Minimalistic GUI with Script Loaders & Part Path Detector
-- Overlays CoreGui including main menu

local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local mouse = player:GetMouse()

-- Create ScreenGui in CoreGui to overlay everything
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "PartPathGUI"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.DisplayOrder = 999999999
screenGui.Parent = CoreGui

-- Main Frame (larger size)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 280, 0, 220)
mainFrame.Position = UDim2.new(0.5, -140, 0.1, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
mainFrame.BorderSizePixel = 1
mainFrame.BorderColor3 = Color3.fromRGB(50, 50, 50)
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

-- Add rounded corners
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 6)
corner.Parent = mainFrame

-- Title bar
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 45)
titleBar.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 6)
titleCorner.Parent = titleBar

-- Skull Icon
local SkullIcon = Instance.new("ImageLabel", titleBar)
SkullIcon.Size = UDim2.new(0, 32, 0, 32)
SkullIcon.Position = UDim2.new(0, 6, 0, 6)
SkullIcon.BackgroundTransparency = 1
SkullIcon.Image = "rbxassetid://93796493145546"
SkullIcon.ImageColor3 = Color3.fromRGB(255, 255, 255)
SkullIcon.ScaleType = Enum.ScaleType.Fit

-- Title label
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, -70, 0, 22)
titleLabel.Position = UDim2.new(0, 45, 0, 2)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "SPOOKALICIOUS V4"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.TextSize = 14
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Parent = titleBar

-- Subtitle label
local subtitleLabel = Instance.new("TextLabel")
subtitleLabel.Size = UDim2.new(1, -70, 0, 15)
subtitleLabel.Position = UDim2.new(0, 45, 0, 24)
subtitleLabel.BackgroundTransparency = 1
subtitleLabel.Text = "PATH FINDER"
subtitleLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
subtitleLabel.TextSize = 10
subtitleLabel.Font = Enum.Font.Gotham
subtitleLabel.TextXAlignment = Enum.TextXAlignment.Left
subtitleLabel.Parent = titleBar

-- Close button (X)
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 25, 0, 25)
closeButton.Position = UDim2.new(1, -25, 0, 0)
closeButton.BackgroundTransparency = 1
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(200, 200, 200)
closeButton.TextSize = 14
closeButton.Font = Enum.Font.GothamBold
closeButton.Parent = titleBar

closeButton.MouseEnter:Connect(function()
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
end)

closeButton.MouseLeave:Connect(function()
    closeButton.TextColor3 = Color3.fromRGB(200, 200, 200)
end)

closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Path display box (current hover)
local pathDisplay = Instance.new("TextBox")
pathDisplay.Name = "PathDisplay"
pathDisplay.Size = UDim2.new(1, -16, 0, 30)
pathDisplay.Position = UDim2.new(0, 8, 0, 53)
pathDisplay.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
pathDisplay.BorderSizePixel = 1
pathDisplay.BorderColor3 = Color3.fromRGB(50, 50, 50)
pathDisplay.Text = "Hover over parts..."
pathDisplay.TextColor3 = Color3.fromRGB(150, 150, 150)
pathDisplay.TextSize = 10
pathDisplay.Font = Enum.Font.Code
pathDisplay.TextXAlignment = Enum.TextXAlignment.Left
pathDisplay.TextYAlignment = Enum.TextYAlignment.Top
pathDisplay.TextWrapped = true
pathDisplay.ClearTextOnFocus = false
pathDisplay.Parent = mainFrame

local pathCorner = Instance.new("UICorner")
pathCorner.CornerRadius = UDim.new(0, 4)
pathCorner.Parent = pathDisplay

local pathPadding = Instance.new("UIPadding")
pathPadding.PaddingLeft = UDim.new(0, 5)
pathPadding.PaddingRight = UDim.new(0, 5)
pathPadding.PaddingTop = UDim.new(0, 3)
pathPadding.Parent = pathDisplay

-- Copied path display box
local copiedDisplay = Instance.new("TextBox")
copiedDisplay.Name = "CopiedDisplay"
copiedDisplay.Size = UDim2.new(1, -16, 0, 30)
copiedDisplay.Position = UDim2.new(0, 8, 0, 91)
copiedDisplay.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
copiedDisplay.BorderSizePixel = 1
copiedDisplay.BorderColor3 = Color3.fromRGB(50, 50, 50)
copiedDisplay.Text = "Last copied: None"
copiedDisplay.TextColor3 = Color3.fromRGB(120, 120, 120)
copiedDisplay.TextSize = 10
copiedDisplay.Font = Enum.Font.Code
copiedDisplay.TextXAlignment = Enum.TextXAlignment.Left
copiedDisplay.TextYAlignment = Enum.TextYAlignment.Top
copiedDisplay.TextWrapped = true
copiedDisplay.ClearTextOnFocus = false
copiedDisplay.Parent = mainFrame

local copiedCorner = Instance.new("UICorner")
copiedCorner.CornerRadius = UDim.new(0, 4)
copiedCorner.Parent = copiedDisplay

local copiedPadding = Instance.new("UIPadding")
copiedPadding.PaddingLeft = UDim.new(0, 5)
copiedPadding.PaddingRight = UDim.new(0, 5)
copiedPadding.PaddingTop = UDim.new(0, 3)
copiedPadding.Parent = copiedDisplay

-- Button creation function
local function createButton(name, text, position, callback)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Size = UDim2.new(0, 128, 0, 32)
    button.Position = position
    button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    button.BorderSizePixel = 1
    button.BorderColor3 = Color3.fromRGB(60, 60, 60)
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.TextSize = 11
    button.Font = Enum.Font.Gotham
    button.AutoButtonColor = false
    button.Parent = mainFrame
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 4)
    btnCorner.Parent = button
    
    -- Hover effect
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
    end)
    
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    end)
    
    -- Click effect
    button.MouseButton1Down:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    end)
    
    button.MouseButton1Up:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
    end)
    
    button.MouseButton1Click:Connect(callback)
    
    return button
end

-- Infinite Yield button
createButton("IYButton", "Infinite Yield", UDim2.new(0, 8, 0, 129), function()
    loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
end)

-- Dex button
createButton("DexButton", "Dex Explorer", UDim2.new(0, 144, 0, 129), function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/peyton2465/Dex/master/out.lua"))()
end)

-- Info label
local infoLabel = Instance.new("TextLabel")
infoLabel.Size = UDim2.new(1, -16, 0, 14)
infoLabel.Position = UDim2.new(0, 8, 0, 169)
infoLabel.BackgroundTransparency = 1
infoLabel.Text = "MMB to copy path"
infoLabel.TextColor3 = Color3.fromRGB(120, 120, 120)
infoLabel.TextSize = 9
infoLabel.Font = Enum.Font.Gotham
infoLabel.TextXAlignment = Enum.TextXAlignment.Center
infoLabel.Parent = mainFrame

-- Part Path Detection System
local selectionBox = Instance.new("SelectionBox")
selectionBox.LineThickness = 0.05
selectionBox.Color3 = Color3.fromRGB(255, 255, 255)
selectionBox.Parent = workspace

local currentPart = nil

-- Function to get full path
local function getPath(obj)
    local path = obj.Name
    local parent = obj.Parent
    
    while parent and parent ~= game do
        path = parent.Name .. "." .. path
        parent = parent.Parent
    end
    
    return "game." .. path
end

-- Function to check if object is valid for selection
local function isValidPart(obj)
    return obj and obj:IsA("BasePart") and obj.Parent and not obj:IsDescendantOf(player.Character or workspace)
end

-- Mouse movement detection
RunService.RenderStepped:Connect(function()
    local target = mouse.Target
    
    if isValidPart(target) then
        if currentPart ~= target then
            currentPart = target
            selectionBox.Adornee = target
            
            local path = getPath(target)
            pathDisplay.Text = path
            pathDisplay.TextColor3 = Color3.fromRGB(200, 200, 200)
        end
    else
        if currentPart then
            currentPart = nil
            selectionBox.Adornee = nil
            pathDisplay.Text = "Hover over parts..."
            pathDisplay.TextColor3 = Color3.fromRGB(150, 150, 150)
        end
    end
end)

-- Middle mouse button to copy path
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if input.UserInputType == Enum.UserInputType.MouseButton3 then -- Middle mouse button
        if currentPart then
            local path = getPath(currentPart)
            setclipboard(path)
            
            -- Update copied display
            copiedDisplay.Text = "Copied: " .. path
            copiedDisplay.TextColor3 = Color3.fromRGB(255, 255, 255)
            
            -- Visual feedback on main display
            local originalText = pathDisplay.Text
            pathDisplay.Text = "âœ“ Copied to clipboard!"
            pathDisplay.TextColor3 = Color3.fromRGB(255, 255, 255)
            
            wait(1)
            if currentPart then
                pathDisplay.Text = getPath(currentPart)
                pathDisplay.TextColor3 = Color3.fromRGB(200, 200, 200)
            end
        end
    end
end)

print("SPOOKALICIOUS V4 loaded successfully!")
